<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全家饮食规划 - 益家AiFamily</title>
    <link rel="stylesheet" href="/static/css/xialakimi.css">
    <link rel="stylesheet" href="/static/css/peican.css">
    <link rel="stylesheet" href="/static/css/nutrition.css">
</head>
<body>
    <!-- 遮罩层 (初始在屏幕外) -->
    <div id="pullOverlay"></div>
    <!-- 顶部隐藏面板 -->
    <div id="hiddenPanel">
        <div id="closePanelBtn" style="">X</div>
        <div id="userInfoFormContainer"></div>
    </div>
<!-- ========== 今日营养仪表盘 ========== -->


        <!-- 头部模块 -->
        <section class="my-header">
            <div id="nutritionMiniContent" class="nutrition-mini-container"></div>
        </section>

    <div id="mainContent" class="container">
        <!-- 成员 -->
        <section class="smart-guard-bar">
            <div class="guard-content">
                <div class="member-line">
                </div>
            </div>
            <div class="body-image-preview" id="bodyImagePreview" style="display: none;">
            </div>
            <div>
                <label>
                    <select id="predictionDays">
                        <option value="90" selected>三个月</option>
                        <option value="180">半年</option>
                    </select>
                </label>
            </div>
        </section>

<!-- ===== 今日组合（幻灯片版） ===== -->
          <!-- 主内容区 -->
  <main class="main-content">
<section id="comboSection" class="combo-section">
  <div style="display: flex;justify-content:space-between; align-items:center;">
      <h2 class="combo-title">科学配餐</h2>
    <div id="openmore" class="more">更多设置</div>
  </div>
        <!-- 第一部分：饮食方案 -->
    <div class="preference-section">
        <div class="solution-tags" id="solutionTags">
            <div class="solution-line">
                <span class="solution-tag active" data-solution="lowFat">低脂✓</span>
                <span class="solution-tag active" data-solution="highIron">补铁✓</span>
                <span class="solution-tag active" data-solution="highCalcium">高钙✓</span>
                <span class="solution-tag active" data-solution="lowSalt">限盐✓</span>
            </div>
        </div>
    </div>
    <!--
    <div class="preference-section">
        <div class="cuisine-select" id="cuisineSelectBox">
            <div class="cuisine-toggle" id="cuisineToggle">请选择菜系（可多选）</div>
            <ul class="cuisine-dropdown" id="cuisineDropdown"></ul>
        </div>
    </div>
    -->
    <div class="preference-section">
        <div class="filter-options" id="categorySelectBox">
        </div>
    </div>
    <div class="preference-section">
        <div class="filter-options">
            <label>
                <input type="number" id="max_dishes" name="max_dishes" value="3" min="1" max="100">道菜
            </label>
            <label>
                <input type="text" id="searchDish" name="searchDish" placeholder="搜索">
                <input type="text" id="want_eat" name="want_eat" placeholder="想吃">
                <button id="peican">配餐</button>
            </label>
        </div>
    </div>

    <!-- 分隔线 -->
    <div class="divider"></div>
    <!-- 更多 -->
    <div id="overlaymore" style="display:none;">
    <div class="preference-section" id="popupmore">
        <!-- 第二部分：过敏源 -->
        <div class="filter-options">
            <label class="filter-checkbox">
                <input type="checkbox" id="excludeAllergens">
                <span class="checkmark"></span>
                <span class="filter-label">排除过敏源</span>
                <span class="filter-detail" id="allergensDetail"></span>
            </label>
            <label class="filter-checkbox">
                <input type="checkbox" id="excludeTaboo">
                <span class="checkmark"></span>
                <span class="filter-label">排除忌口</span>
                <span class="filter-detail" id="tabooDetail"></span>
            </label>
            <label class="filter-checkbox">
            <input type="checkbox" id="seasonalOnly">
            <span class="checkmark"></span>
            <span class="filter-label">仅当季食材</span>
            </label>
        </div>
        <div class="budget-selector">
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="low">
                <span class="budget-btn">经济型</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="medium" checked>
                <span class="budget-btn">标准型</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="high">
                <span class="budget-btn">豪华型</span>
            </label>
        </div>
        <div class="budget-selector">
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="low">
                <span class="budget-btn">快手菜</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="medium" checked>
                <span class="budget-btn">日常菜</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="high">
                <span class="budget-btn">功夫菜</span>
            </label>
        </div>
        <div class="divider"></div>
        <div class="budget-selector">
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="low">
                <span class="budget-btn">轻松</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="medium" checked>
                <span class="budget-btn">标准</span>
            </label>
            <label class="budget-option">
                <input type="radio" name="budgetLevel" value="high">
                <span class="budget-btn">高强度</span>
            </label>
        </div>
        <button id="closeBtnmore">&times;</button>
    </div>
    </div>

  <!-- 精选套餐 -->
  <!-- 每个 combo 占一行 -->
    <div>
        <label>
            <input type="checkbox" name="mealType" value="breakfast" checked> 早餐
            <input type="checkbox" name="mealType" value="lunch"> 午餐
            <input type="checkbox" name="mealType" value="dinner"> 晚餐
        </label>
    </div>
  <div id="combos" class="combo-list">
    <!-- JS 会填充这里 -->
  </div>
</section>
      <!--
<section class="combo-section">
  <div class="taste-row">
    <h3 class="combo-name">推荐菜</h3>
    <div class="dish-list" id="dishrecoRowList">
    </div>
    <button class="refresh-taste-inline" id="refreshDishreco">↻ 换一批</button>
  </div>
</section>
-->
<section class="combo-section">
      <!-- 尝尝鲜：同级、一行 3 菜 -->
  <div class="taste-row">
    <h3 class="combo-name">尝尝鲜</h3>
    <div class="dish-list2" id="tasteRowList">
      <!-- JS 动态生成 3 个尝鲜菜 -->
    </div>
    <button class="refresh-taste-inline" id="refreshTasteInline">↻ 换一批</button>
  </div>
</section>
<section class="combo-section">
      <!-- 近期吃过 -->
    <div class="taste-row">
      <h3 class="combo-name">近期吃过</h3>
        <div class="dish-list2" id="historyTrack">
          <!-- JS 动态生成 -->
        </div>
    </div>
</section>
  </main>

<!-- ===== 营养提篮（悬浮） ===== -->
<div id="nutritionBasket" class="nutrition-basket">
  <div class="basket-info" id="openBasket">
    <span id="basketCount">购物清单</span>
      <button id="saveComboButton" class="save-btn">保存套餐</button>
<!--          <span id="budgetSpent" class="budget-spent">预估¥0</span>-->
  </div>
</div>
<!-- ========== 食材与菜品 ========== -->
<div id="cartOverlay" class="cart-overlay">
    <div id="cartDrawer" class="cart-drawer">
        <div class="cart-header">
            <h3>菜品与食材</h3>
            <button id="closeCart" class="cart-close">✕</button>
        </div>
        <div class="card" id="cartContent">

    <!-- 食材清单 - 完全复制index.html的结构 -->
    <div class="ai-dishes-showcase">
        <div class="food-list" id="ingredientListMerge"></div>
        <div class="food-list" id="ingredientList"></div>
        <div class="nutrition-tip" id="ingredientTip"></div>
    </div>

</div>
    </div>
</div>
        <!-- 微成就 -->
        <div class="achievement-bar">
            <div class="progress-container">
                <div class="progress-fill" id="progressFill" style="width: 30%"></div>
            </div>
            <div class="achievement-text" id="achievementText"></div>
        </div>
    </div>
<!--    <script src="js/load-components.js" defer></script>-->
    <!--<script src="js/load-components-in.js" defer></script>-->
    <script type="module" src="/static/js/peican.js"></script>
    <script src="/static/js/xialakimi.js"></script>

</body>
</html>